#!/bin/sh

# runs gtirb-pprinter via docker
# assumes comand format: gtirb-pprinter INPUT_FILE OPTION OUTPUT_FILE

if [ "$#" -ne 3 ]; then
    docker run --rm -it -v "$(pwd)":/workspace grammatech/ddisasm gtirb-pprinter "$@"
    exit
fi

input_full_path=$(realpath "$1")
input_basedir=$(dirname "$input_full_path")
input_basename=$(basename "$input_full_path")

output_full_path=$(realpath "$3")
output_basedir=$(dirname "$output_full_path")
output_basename=$(basename "$output_full_path")

docker run --rm -it -v "$input_basedir":/input -v "$output_basedir":/output grammatech/ddisasm gtirb-pprinter input/"$input_basename" "$2" output/"$output_basename"
